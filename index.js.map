{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["// Імпорт axios для HTTP-запитів\nimport axios from 'axios';\n\n/**\n * Функція для отримання даних з Pixabay API\n * @param {string} query - Пошуковий запит\n * @param {number} page - Номер сторінки\n * @returns {Promise} - Обіцянка з результатами запиту\n */\nasync function fetchData(query, page = 1) {\n  // Параметри запиту\n  const params = {\n    key: '49512194-f753c2f34a7e7dbbd609db53f', // API-ключ\n    q: query,                                   // Пошуковий запит\n    image_type: 'photo',                        // Тип зображень\n    orientation: 'horizontal',                  // Орієнтація\n    safesearch: true,                           // Безпечний пошук\n    page: page,                                 // Номер сторінки\n    per_page: 15,                               // Кількість зображень на сторінці\n  };\n  \n  // Виконання GET-запиту\n  return await axios.get('https://pixabay.com/api/', { params });\n}\n\n// Експорт функції\nexport default fetchData;","// Імпорт бібліотеки для модальних вікон\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\n/**\n * Функція для відображення фотографій у галереї\n * @param {HTMLElement} div - Контейнер для галереї\n * @param {Array} array - Масив об'єктів зображень\n */\nfunction renderPhoto(div, array) {\n  // Генерування HTML-розмітки для кожного зображення\n  const markup = array\n    .map(i => {\n      return `<li class=\"gallery-item\">\n    <a class=\"image-link\" href=\"${i.largeImageURL}\"><img class=\"image\" src=\"${i.webformatURL}\" alt=\"${i.tags}\" title=\"\"/></a>\n    <ul class=\"image-descr-list\">\n<li class=\"descr-item\">Likes<span class=\"descr-span\">${i.likes}</span></li>\n<li class=\"descr-item\">Views<span class=\"descr-span\">${i.views}</span></li>\n<li class=\"descr-item\">Comments<span class=\"descr-span\">${i.comments}</span></li>\n<li class=\"descr-item\">Downloads<span class=\"descr-span\">${i.downloads}</span></li>\n    </ul>\n    </li>`;\n    })\n    .join('');\n  \n  // Додавання розмітки до галереї\n  div.insertAdjacentHTML('beforeend', markup);\n  \n  // Оновлення SimpleLightbox\n  refreshSlb();\n}\n\n// Ініціалізація SimpleLightbox\nconst simplelightbox = new SimpleLightbox('.gallery-item a', {\n  captionsData: 'alt',  // Використання атрибута alt для підписів\n  captionDelay: 250,    // Затримка перед показом підпису\n});\n\n/** Оновлення SimpleLightbox */\nfunction refreshSlb() {\n  simplelightbox.refresh();\n}\n\n/** Очищення галереї */\nfunction clearGallery(div) {\n  div.innerHTML = '';\n}\n\n/** Показ індикатора завантаження */\nfunction showLoader() {\n  const loader = document.querySelector('.loader');\n  loader.style.display = 'flex';\n}\n\n/** Приховування індикатора завантаження */\nfunction hideLoader() {\n  const loader = document.querySelector('.loader');\n  loader.style.display = 'none';\n}\n\n/** Показ кнопки \"Load more\" */\nfunction showLoadMoreButton() {\n  const loadMoreBtn = document.querySelector('.load-more-btn');\n  loadMoreBtn.classList.remove('visually-hidden');\n}\n\n/** Приховування кнопки \"Load more\" */\nfunction hideLoadMoreButton() {\n  const loadMoreBtn = document.querySelector('.load-more-btn');\n  loadMoreBtn.classList.add('visually-hidden');\n}\n\n// Експорт функцій\nexport default renderPhoto;\nexport {\n  clearGallery,\n  showLoader,\n  hideLoader,\n  simplelightbox,\n  refreshSlb,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n};","// Імпорт функцій для роботи з API та відображення\nimport fetchData from './js/pixabay-api';\nimport renderPhoto, {\n  clearGallery,\n  showLoader,\n  hideLoader,\n  simplelightbox,\n  refreshSlb,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n} from './js/render-functions';\n\n// Імпорт бібліотеки для сповіщень\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n// Отримання DOM-елементів\nconst gallery = document.querySelector('.gallery');\nconst form = document.querySelector('.form');\nconst input = form.elements[0];\ninput.classList.add('input');\nconst btn = form.elements[1];\nbtn.classList.add('button');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\n\n// Змінні для пагінації\nlet page = null;\nlet totalPages = null;\nlet query = null;\n\n// Обробник події пошуку\nform.addEventListener('submit', makeGallery);\n\n/**\n * Функція для створення галереї\n * @param {Event} event - Об'єкт події форми\n */\nasync function makeGallery(event) {\n  event.preventDefault();\n  \n  // Очищення галереї та приховування кнопки\n  clearGallery(gallery);\n  hideLoadMoreButton();\n  showLoader();\n  \n  // Отримання пошукового запиту\n  query = input.value;\n  page = 1;\n  \n  // Перевірка на пустий запит\n  if (query === '') {\n    hideLoader();\n    iziToast.error({\n      message: 'Write your something you want to see',\n      position: 'topRight',\n    });\n    return;\n  }\n  \n  try {\n    // Отримання даних з API\n    const response = await fetchData(query, page);\n    \n    // Перевірка наявності результатів\n    if (response.data.hits.length === 0) {\n      iziToast.error({\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n      hideLoader();\n      return;\n    } else {\n      // Відображення зображень\n      renderPhoto(gallery, response.data.hits);\n      \n      // Плавне прокручування сторінки\n      const galleryItem = document.querySelector('.gallery-item');\n      let rect = galleryItem.getBoundingClientRect();\n      window.scrollBy({\n        top: rect.height * 2,\n        behavior: 'smooth',\n      });\n      \n      // Розрахунок загальної кількості сторінок\n      totalPages = Math.ceil(response.data.totalHits / 15);\n      \n      // Перевірка чи є ще зображення для завантаження\n      if (page < totalPages) {\n        showLoadMoreButton();\n      } else {\n        iziToast.info({\n          position: 'bottomCenter',\n          message: `We're sorry, but you've reached the end of search results.`,\n        });\n      }\n    }\n  } catch (error) {\n    iziToast.error({\n      message: 'Bad request',\n      position: 'topRight',\n    });\n  }\n  \n  hideLoader();\n  input.value = '';\n}\n\n// Обробник події завантаження додаткових зображень\nloadMoreBtn.addEventListener('click', loadMore);\n\n/**\n * Функція для завантаження додаткових зображень\n * @param {Event} event - Об'єкт події кнопки\n */\nasync function loadMore(event) {\n  event.preventDefault();\n  hideLoadMoreButton();\n  showLoader();\n  page += 1;\n  \n  try {\n    // Отримання додаткових даних з API\n    const response = await fetchData(query, page);\n    \n    // Відображення зображень\n    renderPhoto(gallery, response.data.hits);\n    \n    // Плавне прокручування сторінки\n    const galleryItem = document.querySelector('.gallery-item');\n    let rect = galleryItem.getBoundingClientRect();\n    window.scrollBy({\n      top: rect.height * 2,\n      behavior: 'smooth',\n    });\n    \n    // Перевірка чи є ще зображення для завантаження\n    if (page < totalPages) {\n      showLoadMoreButton();\n    } else {\n      iziToast.info({\n        position: 'bottomCenter',\n        message: `We're sorry, but you've reached the end of search results.`,\n      });\n    }\n  } catch (error) {\n    iziToast.error({\n      message: 'Bad request',\n      position: 'topRight',\n    });\n  }\n  \n  hideLoader();\n}"],"names":["fetchData","query","page","params","axios","renderPhoto","div","array","markup","i","refreshSlb","simplelightbox","SimpleLightbox","clearGallery","showLoader","loader","hideLoader","showLoadMoreButton","hideLoadMoreButton","gallery","form","input","btn","loadMoreBtn","totalPages","makeGallery","event","iziToast","response","rect","loadMore"],"mappings":"owBASA,eAAeA,EAAUC,EAAOC,EAAO,EAAG,CAExC,MAAMC,EAAS,CACb,IAAK,qCACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAU,EACd,EAGE,OAAO,MAAME,EAAM,IAAI,2BAA4B,CAAE,OAAAD,CAAQ,CAAA,CAC/D,CCdA,SAASE,EAAYC,EAAKC,EAAO,CAE/B,MAAMC,EAASD,EACZ,IAAIE,GACI;AAAA,kCACqBA,EAAE,aAAa,6BAA6BA,EAAE,YAAY,UAAUA,EAAE,IAAI;AAAA;AAAA,uDAErDA,EAAE,KAAK;AAAA,uDACPA,EAAE,KAAK;AAAA,0DACJA,EAAE,QAAQ;AAAA,2DACTA,EAAE,SAAS;AAAA;AAAA,UAGjE,EACA,KAAK,EAAE,EAGVH,EAAI,mBAAmB,YAAaE,CAAM,EAG1CE,GACF,CAGA,MAAMC,EAAiB,IAAIC,EAAe,kBAAmB,CAC3D,aAAc,MACd,aAAc,GAChB,CAAC,EAGD,SAASF,GAAa,CACpBC,EAAe,QAAO,CACxB,CAGA,SAASE,EAAaP,EAAK,CACzBA,EAAI,UAAY,EAClB,CAGA,SAASQ,GAAa,CACpB,MAAMC,EAAS,SAAS,cAAc,SAAS,EAC/CA,EAAO,MAAM,QAAU,MACzB,CAGA,SAASC,GAAa,CACpB,MAAMD,EAAS,SAAS,cAAc,SAAS,EAC/CA,EAAO,MAAM,QAAU,MACzB,CAGA,SAASE,GAAqB,CACR,SAAS,cAAc,gBAAgB,EAC/C,UAAU,OAAO,iBAAiB,CAChD,CAGA,SAASC,GAAqB,CACR,SAAS,cAAc,gBAAgB,EAC/C,UAAU,IAAI,iBAAiB,CAC7C,CCrDA,MAAMC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAQD,EAAK,SAAS,CAAC,EAC7BC,EAAM,UAAU,IAAI,OAAO,EAC3B,MAAMC,EAAMF,EAAK,SAAS,CAAC,EAC3BE,EAAI,UAAU,IAAI,QAAQ,EAC1B,MAAMC,EAAc,SAAS,cAAc,gBAAgB,EAG3D,IAAIrB,EAAO,KACPsB,EAAa,KACbvB,EAAQ,KAGZmB,EAAK,iBAAiB,SAAUK,CAAW,EAM3C,eAAeA,EAAYC,EAAO,CAahC,GAZAA,EAAM,eAAc,EAGpBb,EAAaM,CAAO,EACpBD,IACAJ,IAGAb,EAAQoB,EAAM,MACdnB,EAAO,EAGHD,IAAU,GAAI,CAChBe,IACAW,EAAS,MAAM,CACb,QAAS,uCACT,SAAU,UAChB,CAAK,EACD,MACD,CAED,GAAI,CAEF,MAAMC,EAAW,MAAM5B,EAAUC,EAAOC,CAAI,EAG5C,GAAI0B,EAAS,KAAK,KAAK,SAAW,EAAG,CACnCD,EAAS,MAAM,CACb,QAAS,2EACT,SAAU,UAClB,CAAO,EACDX,IACA,MACN,KAAW,CAELX,EAAYc,EAASS,EAAS,KAAK,IAAI,EAIvC,IAAIC,EADgB,SAAS,cAAc,eAAe,EACnC,wBACvB,OAAO,SAAS,CACd,IAAKA,EAAK,OAAS,EACnB,SAAU,QAClB,CAAO,EAGDL,EAAa,KAAK,KAAKI,EAAS,KAAK,UAAY,EAAE,EAG/C1B,EAAOsB,EACTP,IAEAU,EAAS,KAAK,CACZ,SAAU,eACV,QAAS,4DACnB,CAAS,CAEJ,CACF,MAAe,CACdA,EAAS,MAAM,CACb,QAAS,cACT,SAAU,UAChB,CAAK,CACF,CAEDX,IACAK,EAAM,MAAQ,EAChB,CAGAE,EAAY,iBAAiB,QAASO,CAAQ,EAM9C,eAAeA,EAASJ,EAAO,CAC7BA,EAAM,eAAc,EACpBR,IACAJ,IACAZ,GAAQ,EAER,GAAI,CAEF,MAAM0B,EAAW,MAAM5B,EAAUC,EAAOC,CAAI,EAG5CG,EAAYc,EAASS,EAAS,KAAK,IAAI,EAIvC,IAAIC,EADgB,SAAS,cAAc,eAAe,EACnC,wBACvB,OAAO,SAAS,CACd,IAAKA,EAAK,OAAS,EACnB,SAAU,QAChB,CAAK,EAGG3B,EAAOsB,EACTP,IAEAU,EAAS,KAAK,CACZ,SAAU,eACV,QAAS,4DACjB,CAAO,CAEJ,MAAe,CACdA,EAAS,MAAM,CACb,QAAS,cACT,SAAU,UAChB,CAAK,CACF,CAEDX,GACF"}